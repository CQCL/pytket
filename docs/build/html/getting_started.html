

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Getting Started &mdash; pytket 0.7.1 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/jupyter-sphinx.css" type="text/css" />
  <link rel="stylesheet" href="_static/thebelab.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/thebelab-helper.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.20.0-alpha.0/dist/embed-amd.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Changelog" href="changelog.html" />
    <link rel="prev" title="pytket" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> pytket
          

          
          </a>

          
            
            
              <div class="version">
                0.7
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#designing-a-quantum-circuit">Designing a Quantum Circuit</a></li>
<li class="toctree-l2"><a class="reference internal" href="#running-on-a-backend">Running on a Backend</a></li>
<li class="toctree-l2"><a class="reference internal" href="#compilation-the-missing-link">Compilation – The Missing Link</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="licence.html">SOFTWARE LICENCE</a></li>
<li class="toctree-l1"><a class="reference internal" href="telemetry_data_policy.html">PYTKET TELEMETRY DATA POLICY</a></li>
<li class="toctree-l1"><a class="reference internal" href="opensource.html">Open Source Attribution</a></li>
</ul>
<p class="caption"><span class="caption-text">User Manual:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="manual_intro.html">What is tket?</a></li>
<li class="toctree-l1"><a class="reference internal" href="manual_circuit.html">Circuit Construction</a></li>
<li class="toctree-l1"><a class="reference internal" href="manual_backend.html">Running on Backends</a></li>
<li class="toctree-l1"><a class="reference internal" href="manual_compiler.html">Compilation</a></li>
<li class="toctree-l1"><a class="reference internal" href="manual_noise.html">Noise and the Quantum Circuit Model</a></li>
</ul>
<p class="caption"><span class="caption-text">API Reference:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="backends.html">pytket.backends</a></li>
<li class="toctree-l1"><a class="reference internal" href="circuit.html">pytket.circuit</a></li>
<li class="toctree-l1"><a class="reference internal" href="pauli.html">pytket.pauli</a></li>
<li class="toctree-l1"><a class="reference internal" href="device.html">pytket.device</a></li>
<li class="toctree-l1"><a class="reference internal" href="passes.html">pytket.passes</a></li>
<li class="toctree-l1"><a class="reference internal" href="predicates.html">pytket.predicates</a></li>
<li class="toctree-l1"><a class="reference internal" href="program.html">pytket.program</a></li>
<li class="toctree-l1"><a class="reference internal" href="partition.html">pytket.partition</a></li>
<li class="toctree-l1"><a class="reference internal" href="qasm.html">pytket.qasm</a></li>
<li class="toctree-l1"><a class="reference internal" href="quipper.html">pytket.quipper</a></li>
<li class="toctree-l1"><a class="reference internal" href="routing.html">pytket.routing</a></li>
<li class="toctree-l1"><a class="reference internal" href="transform.html">pytket.transform</a></li>
<li class="toctree-l1"><a class="reference internal" href="utils.html">pytket.utils</a></li>
<li class="toctree-l1"><a class="reference internal" href="logging.html">pytket.logging</a></li>
</ul>
<p class="caption"><span class="caption-text">Specific extensions:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="extensions/aqt.html">pytket-aqt</a></li>
<li class="toctree-l1"><a class="reference internal" href="extensions/braket.html">pytket-braket</a></li>
<li class="toctree-l1"><a class="reference internal" href="extensions/cirq.html">pytket-cirq</a></li>
<li class="toctree-l1"><a class="reference internal" href="extensions/honeywell.html">pytket-honeywell</a></li>
<li class="toctree-l1"><a class="reference internal" href="extensions/projectq.html">pytket-projectq</a></li>
<li class="toctree-l1"><a class="reference internal" href="extensions/pyquil.html">pytket-pyquil</a></li>
<li class="toctree-l1"><a class="reference internal" href="extensions/pyzx.html">pytket-pyzx</a></li>
<li class="toctree-l1"><a class="reference internal" href="extensions/qiskit.html">pytket-qiskit</a></li>
<li class="toctree-l1"><a class="reference internal" href="extensions/qsharp.html">pytket-qsharp</a></li>
<li class="toctree-l1"><a class="reference internal" href="extensions/qulacs.html">pytket-qulacs</a></li>
<li class="toctree-l1"><a class="reference internal" href="extensions/ionq.html">pytket-ionq</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">pytket</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Getting Started</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/getting_started.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="getting-started">
<span id="start"></span><h1>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h1>
<p>The tket compiler is a powerful tool for optimising and manipulating platform-agnostic quantum circuits, focussed on enabling superior performance on NISQ (Noisy Intermediate-Scale Quantum) devices. The pytket package provides an API for interacting with tket and transpiling to and from other popular quantum circuit specifications.</p>
<p>Pytket is compatible with 64-bit Python 3.6, 3.7 and 3.8, on Linux, MacOS (10.14 or later) and Windows. Install pytket from PyPI using:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">pytket</span>
</pre></div>
</div>
<p>This will install the tket compiler binaries as well as the pytket package. For those using an older version of pytket, keep up to date by installing with the <code class="docutils literal notranslate"><span class="pre">--upgrade</span></code> flag for additional features and bug fixes.</p>
<p>There are separate packages for managing the interoperability between pytket and other quantum software packages which can also be installed via PyPI:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">pytket-aqt</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytket-braket</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytket-cirq</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytket-honeywell</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytket-projectq</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytket-pyquil</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytket-pyzx</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytket-qiskit</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytket-qsharp</span></code></p></li>
</ul>
<div class="section" id="designing-a-quantum-circuit">
<h2>Designing a Quantum Circuit<a class="headerlink" href="#designing-a-quantum-circuit" title="Permalink to this headline">¶</a></h2>
<p>The quantum circuit is an abstraction of computation using quantum resources, designed by initialising a system into a fixed state, then mutating it via sequences of instructions/gates.</p>
<p>The native circuit interface built into <code class="docutils literal notranslate"><span class="pre">pytket</span></code> allows us to build circuits and use them directly.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pytket</span> <span class="kn">import</span> <span class="n">Circuit</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">Circuit</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span> <span class="c1"># define a circuit with 2 qubits and 2 bits</span>
<span class="n">c</span><span class="o">.</span><span class="n">H</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>           <span class="c1"># add a Hadamard gate to qubit 0</span>
<span class="n">c</span><span class="o">.</span><span class="n">Rz</span><span class="p">(</span><span class="mf">0.25</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>    <span class="c1"># add an Rz gate of angle 0.25*pi to qubit 0</span>
<span class="n">c</span><span class="o">.</span><span class="n">CX</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>        <span class="c1"># add a CX gate with control qubit 1 and target qubit 0</span>
<span class="n">c</span><span class="o">.</span><span class="n">measure_all</span><span class="p">()</span>  <span class="c1"># measure qubits 0 and 1, recording the results in bits 0 and 1</span>
</pre></div>
</div>
<p>Building directly in <code class="docutils literal notranslate"><span class="pre">pytket</span></code> provides many handy shortcuts and higher-level components for circuits, including custom gate definitions, circuit composition, gates with symbolic parameters, and conditional gates. These are explored in detail in the <a class="reference external" href="https://github.com/CQCL/pytket/blob/master/examples/circuit_generation_example.ipynb">circuit generation</a>, <a class="reference external" href="https://github.com/CQCL/pytket/blob/master/examples/conditional_gate_example.ipynb">conditional gate</a> and <a class="reference external" href="https://github.com/CQCL/pytket/blob/master/examples/symbolics_example.ipynb">symbolic circuit</a> examples.</p>
<p>On the other hand, <code class="docutils literal notranslate"><span class="pre">pytket</span></code>’s flexibility of interface allows you to take circuits defined in a number of languages, including raw source code languages such as OpenQASM and Quipper, or embedded python frameworks such as Qiskit and Cirq.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pytket.qasm</span> <span class="kn">import</span> <span class="n">circuit_from_qasm</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">circuit_from_qasm</span><span class="p">(</span><span class="s2">&quot;my_qasm_file.qasm&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Or, if an extension module like <code class="docutils literal notranslate"><span class="pre">pytket-qiskit</span></code> is installed,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">qiskit</span> <span class="kn">import</span> <span class="n">QuantumCircuit</span>
<span class="n">qc</span> <span class="o">=</span> <span class="n">QuantumCircuit</span><span class="p">()</span>
<span class="c1"># ...</span>
<span class="kn">from</span> <span class="nn">pytket.extensions.qiskit</span> <span class="kn">import</span> <span class="n">qiskit_to_tk</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">qiskit_to_tk</span><span class="p">(</span><span class="n">qc</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="running-on-a-backend">
<h2>Running on a Backend<a class="headerlink" href="#running-on-a-backend" title="Permalink to this headline">¶</a></h2>
<p>Designing a circuit is good, but our real goal is to run them on a quantum device. <code class="docutils literal notranslate"><span class="pre">pytket</span></code> presents a uniform interface for a number of hardware devices from several providers, as well as a selection of simulators. Many of the extension modules for <code class="docutils literal notranslate"><span class="pre">pytket</span></code> include <code class="xref py py-class docutils literal notranslate"><span class="pre">Backend</span></code> classes, which can be used interchangeably.</p>
<p>On quantum hardware, the observable outputs of the circuit are the final states of the classical registers. These are returned via a shot table – a table of outcomes where the columns correspond to the individual classical bits, and each row is the result from a single run of the circuit.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pytket.backends.ibm</span> <span class="kn">import</span> <span class="n">IBMQBackend</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">IBMQBackend</span><span class="p">(</span><span class="s2">&quot;ibmq_london&quot;</span><span class="p">)</span>
<span class="c1"># ...</span>
<span class="kn">from</span> <span class="nn">pytket.backends.forest</span> <span class="kn">import</span> <span class="n">ForestBackend</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">ForestBackend</span><span class="p">(</span><span class="s2">&quot;Aspen-8&quot;</span><span class="p">)</span>
<span class="c1"># ...</span>
<span class="kn">from</span> <span class="nn">pytket.backends.aqt</span> <span class="kn">import</span> <span class="n">AQTBackend</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">AQTBackend</span><span class="p">(</span><span class="n">access_token</span><span class="p">,</span> <span class="s2">&quot;sim&quot;</span><span class="p">)</span>
<span class="c1"># ...</span>
<span class="n">b</span><span class="o">.</span><span class="n">compile_circuit</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>        <span class="c1"># performs the minimal compilation to satisfy the device/simulator constraints</span>
<span class="n">handle</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">process_circuit</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>   <span class="c1"># run the circuit 10 times</span>
<span class="n">shots</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">get_shots</span><span class="p">(</span><span class="n">handle</span><span class="p">)</span> <span class="c1"># retrieve and return the readouts</span>
<span class="nb">print</span><span class="p">(</span><span class="n">shots</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[[</span><span class="mi">0</span> <span class="mi">0</span><span class="p">]</span>
 <span class="p">[</span><span class="mi">1</span> <span class="mi">0</span><span class="p">]</span>
 <span class="p">[</span><span class="mi">0</span> <span class="mi">0</span><span class="p">]</span>
 <span class="p">[</span><span class="mi">1</span> <span class="mi">0</span><span class="p">]</span>
 <span class="p">[</span><span class="mi">0</span> <span class="mi">0</span><span class="p">]</span>
 <span class="p">[</span><span class="mi">0</span> <span class="mi">0</span><span class="p">]</span>
 <span class="p">[</span><span class="mi">1</span> <span class="mi">0</span><span class="p">]</span>
 <span class="p">[</span><span class="mi">1</span> <span class="mi">0</span><span class="p">]</span>
 <span class="p">[</span><span class="mi">0</span> <span class="mi">0</span><span class="p">]</span>
 <span class="p">[</span><span class="mi">1</span> <span class="mi">0</span><span class="p">]]</span>
</pre></div>
</div>
<p>If the ordering of results is not needed, the <code class="docutils literal notranslate"><span class="pre">get_counts</span></code> method instead returns a summary of the frequencies of each result.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">counts</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">get_counts</span><span class="p">(</span><span class="n">handle</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">counts</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">):</span> <span class="mi">5</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">):</span> <span class="mi">5</span><span class="p">}</span>
</pre></div>
</div>
<p>All of these are stochastically sampled. Whilst this is how the real devices run, it is more convenient to have a complete description of the state of the system when testing that your circuit design was correctly implemented. Some simulators allow you to inspect the final statevector when a pure quantum circuit (one without any measurements) is run on the initial state <span class="math notranslate nohighlight">\(|0\rangle^{\otimes n}\)</span>. This makes it easy to test running our circuit design on some test input state.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">initial_state</span> <span class="o">=</span> <span class="n">Circuit</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>      <span class="c1"># Initialise the system in 1/sqrt(2) (|011&gt; + |101&gt;)</span>
<span class="n">initial_state</span><span class="o">.</span><span class="n">H</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">initial_state</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">initial_state</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="n">initial_state</span><span class="o">.</span><span class="n">CX</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

<span class="n">increment</span> <span class="o">=</span> <span class="n">Circuit</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="n">increment</span><span class="o">.</span><span class="n">CCX</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">increment</span><span class="o">.</span><span class="n">CX</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">increment</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>

<span class="n">final_state</span> <span class="o">=</span> <span class="n">initial_state</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">final_state</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">increment</span><span class="p">)</span>

<span class="kn">from</span> <span class="nn">pytket.backends.ibm</span> <span class="kn">import</span> <span class="n">AerStateBackend</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">AerStateBackend</span><span class="p">()</span>
<span class="n">b</span><span class="o">.</span><span class="n">compile_circuit</span><span class="p">(</span><span class="n">initial_state</span><span class="p">)</span>
<span class="n">b</span><span class="o">.</span><span class="n">compile_circuit</span><span class="p">(</span><span class="n">final_state</span><span class="p">)</span>
<span class="n">handles</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">process_circuits</span><span class="p">([</span><span class="n">initial_state</span><span class="p">,</span> <span class="n">final_state</span><span class="p">])</span>
<span class="n">s0</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">get_state</span><span class="p">(</span><span class="n">handles</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>    <span class="c1"># Check that the initial state is 1/sqrt(2) (|011&gt; + |101&gt;)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">s0</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>             <span class="c1"># Round to ignore floating-point error in simulation</span>
<span class="n">s1</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">get_state</span><span class="p">(</span><span class="n">handles</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>    <span class="c1"># Check that the incrementer has mapped this to 1/sqrt(2) (|100&gt; + |110&gt;)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">s1</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="mf">0.</span>        <span class="o">+</span><span class="mf">0.</span><span class="n">j</span> <span class="mf">0.</span>        <span class="o">+</span><span class="mf">0.</span><span class="n">j</span> <span class="mf">0.</span>        <span class="o">+</span><span class="mf">0.</span><span class="n">j</span> <span class="mf">0.70710678</span><span class="o">+</span><span class="mf">0.</span><span class="n">j</span>
 <span class="mf">0.</span>        <span class="o">+</span><span class="mf">0.</span><span class="n">j</span> <span class="mf">0.70710678</span><span class="o">+</span><span class="mf">0.</span><span class="n">j</span> <span class="mf">0.</span>        <span class="o">+</span><span class="mf">0.</span><span class="n">j</span> <span class="mf">0.</span>        <span class="o">+</span><span class="mf">0.</span><span class="n">j</span><span class="p">]</span>
<span class="p">[</span> <span class="mf">0.</span> <span class="o">-</span><span class="mf">0.</span><span class="n">j</span>  <span class="o">-</span><span class="mf">0.</span> <span class="o">+</span><span class="mf">0.</span><span class="n">j</span>   <span class="mf">0.</span> <span class="o">+</span><span class="mf">0.</span><span class="n">j</span>   <span class="mf">0.</span> <span class="o">-</span><span class="mf">0.</span><span class="n">j</span>   <span class="mf">0.5</span><span class="o">-</span><span class="mf">0.5</span><span class="n">j</span>  <span class="mf">0.</span> <span class="o">+</span><span class="mf">0.</span><span class="n">j</span>   <span class="mf">0.5</span><span class="o">-</span><span class="mf">0.5</span><span class="n">j</span>
 <span class="o">-</span><span class="mf">0.</span> <span class="o">+</span><span class="mf">0.</span><span class="n">j</span> <span class="p">]</span>
</pre></div>
</div>
<p>Given that global phase of a quantum system is unobservable (it can never affect the evolution of the system or measurent outcomes), these are the correct states we were looking for.</p>
<p>We look in more detail at the supported backends and their features in the <a class="reference external" href="https://github.com/CQCL/pytket/blob/master/examples/backends_example.ipynb">backends example</a>.</p>
</div>
<div class="section" id="compilation-the-missing-link">
<h2>Compilation – The Missing Link<a class="headerlink" href="#compilation-the-missing-link" title="Permalink to this headline">¶</a></h2>
<p>In the previous section, we saw how <code class="docutils literal notranslate"><span class="pre">pytket</span></code> presents a uniform interface for all device and simulator backends. This is designed to help make the user development more flexible, allowing seamless switching between simulators for testing and many different types of quantum hardware for real experiments.</p>
<p>In reality, this hides a lot of the complexity of running quantum circuits. Each simulator or device can work very differently under the hood, requiring circuits to be transformed into specific formats before being submitted. This can include restrictions on the universal gate set natively provided, the connectivity of the qubits, and what class of measurements are permitted (none, only at the end of the circuit, or mid-circuit via destructive/non-destructive measurement). Pushing these restrictions onto the user means that only experts in quantum circuit design and device characterisation can get the best results.</p>
<p>Each <code class="xref py py-class docutils literal notranslate"><span class="pre">Backend</span></code> object is aware of the requirements of the underlying system and can test whether or not a circuit already satisfies them:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">c</span> <span class="o">=</span> <span class="n">Circuit</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="c1"># ...</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">b</span><span class="o">.</span><span class="n">valid_circuit</span><span class="p">(</span><span class="n">c</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Not ready to run&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>If our circuit does not meet all the requirements of the device then it needs to be rewritten in some manner. Fortunately, most of these rewrites can be performed automtically by <code class="docutils literal notranslate"><span class="pre">pytket</span></code>’s compiler passes. Each elementary pass aims to either rewrite the circuit to conform to a particular constraint, or optimise the circuit by finding an equivalent realisation of the same operation that has a lower resource cost. For example, if the qubits of the circuit have already been allocated onto the physical qubits of the device, the <code class="xref py py-class docutils literal notranslate"><span class="pre">RoutingPass</span></code> will add additional gates to permute the qubits so that the circuit satisfies the device connectivity.</p>
<p>Since the backend constraints are known, we have included a default sequence of compiler passes to solve each of the constraints in turn. We already saw the <code class="docutils literal notranslate"><span class="pre">compile_circuit</span></code> method on the backends which applies this to a circuit.</p>
<p>However, if you want fine-grained control over the compilation performed, each compiler pass is exposed for you to invoke directly. For example, the <code class="docutils literal notranslate"><span class="pre">PauliSimp</span></code> pass for resynthesising circuits to reduce the gate count is designed to work well for Trotterised Hamiltonian circuits. We can apply this to our circuit using the <code class="docutils literal notranslate"><span class="pre">apply</span></code> method.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pytket.passes</span> <span class="kn">import</span> <span class="n">PauliSimp</span>
<span class="n">PauliSimp</span><span class="p">()</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
</pre></div>
</div>
<p>Note that applying optimisation passes will change the circuit structure and possibly invalidate the constraints of the backend, so the order of application is important. In general, we recommend starting with more intensive optimisations, then compiling to solve for the constraints, and then running some lighter optimisations (which preserve the constraints) to tidy up any redundancies introduced during the compilation. We can achieve this by composing the <code class="docutils literal notranslate"><span class="pre">PauliSimp</span></code> pass with the default pass from the backend.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pytket.passes</span> <span class="kn">import</span> <span class="n">SequencePass</span>
<span class="n">comp_pass</span> <span class="o">=</span> <span class="n">SequencePass</span><span class="p">([</span><span class="n">PauliSimp</span><span class="p">(),</span> <span class="n">b</span><span class="o">.</span><span class="n">default_compilation_pass</span><span class="p">])</span>
<span class="n">comp_pass</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
</pre></div>
</div>
<p>During the compilation procedure, there may be large structural and interface changes to the circuit. In particular, the identifiers for qubits and bits may change as the logical qubits are placed onto the physical qubits of the device, and the classical data may be reordered to match the target data model. The <code class="xref py py-class docutils literal notranslate"><span class="pre">CompilationUnit</span></code> class can wrap up a circuit to record extra information relating to the compilation procedure.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pytket.predicates</span> <span class="kn">import</span> <span class="n">CompilationUnit</span>
<span class="n">cu</span> <span class="o">=</span> <span class="n">CompilationUnit</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
<span class="n">comp_pass</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">cu</span><span class="p">)</span>
<span class="n">final_circuit</span> <span class="o">=</span> <span class="n">cu</span><span class="o">.</span><span class="n">circuit</span>
<span class="nb">print</span><span class="p">(</span><span class="n">cu</span><span class="o">.</span><span class="n">final_map</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="n">c</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span> <span class="n">c</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">c</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span> <span class="n">c</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">q</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span> <span class="n">node</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">q</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span> <span class="n">node</span><span class="p">[</span><span class="mi">0</span><span class="p">]}</span>
</pre></div>
</div>
<p>Some constraints are not possible to solve automatically and hence are still presented to the user. These relate to the computational model and what is fundamentally supported in terms of measurements, classical data, and control flow. For example, statevector simulators like the <code class="xref py py-class docutils literal notranslate"><span class="pre">AerStateBackend</span></code> give a deterministic result for pure quantum circuits, so cannot typically run circuits containing measurements or conditional gates. Since these gates are often crucial to the correctness of a quantum program, there is no faithful way to eliminate them from the circuit. Hence if <code class="docutils literal notranslate"><span class="pre">valid_circuit</span></code> returns <code class="docutils literal notranslate"><span class="pre">False</span></code> after compilation, this may require manual edits to the circuit design.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="changelog.html" class="btn btn-neutral float-right" title="Changelog" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="index.html" class="btn btn-neutral float-left" title="pytket" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2020, Cambridge Quantum Computing Ltd.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>